# 快速启动指南

## 环境要求

- Python 3.9+
- Node.js 18+
- MySQL 8.0+

## 安装步骤

### 1. 数据库准备

```sql
# 创建数据库
mysql -u root -p < database/init.sql

# 导入初始数据
mysql -u root -p < database/seed.sql
```

### 2. 后端启动

```bash
cd backend

# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
Windows: venv\Scripts\activate
Linux/Mac: source venv/bin/activate

# 安装依赖
pip install -r requirements.txt

# 启动后端
python main.py
```

### 3. 前端启动

```bash
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 4. 访问应用

- 前端地址: http://localhost:5173
- 后端API: http://localhost:8000
- API文档: http://localhost:8000/docs

## 环境变量配置

### 后端 (.env)

复制 `.env.example` 为 `.env`，根据需要修改配置：

```env
# 数据库配置
DATABASE_URL=mysql+pymysql://用户名:密码@localhost:3306/smart_city

# JWT密钥
SECRET_KEY=your-secret-key-change-in-production
```

### 前端 (.env)

```env
VITE_API_BASE_URL=http://localhost:8000/api/v1
```

## 首次使用

1. 访问 http://localhost:5173
2. 点击"立即注册"创建账号
3. 登录后进入系统
4. 点击右上角用户名 → "AI配置"
5. 添加AI Provider（如智谱AI）
   - 提供商：选择"智谱AI"
   - 名称：自定义名称
   - API Key：输入您的API Key（从 https://open.bigmodel.cn/ 获取）
6. 开始使用AI对话控制3D城市！

## 免费AI模型推荐

- **智谱GLM-4-Flash**: 完全免费，无需注册即可使用
- **通义千问Qwen-Turbo**: 每日免费额度充足
- **DeepSeek-Chat**: 性价比高，部分免费

## 常见问题

### 数据库连接失败

检查 `.env` 文件中的数据库连接信息是否正确。

### 前端无法连接后端

1. 确认后端服务已启动
2. 检查 `vite.config.ts` 中的代理配置

### Cesium地图无法显示

1. 检查浏览器控制台是否有错误
2. 确保网络连接正常（需要加载在线地图数据）

## 开发模式

- 前端热重载：修改代码后自动刷新
- 后端热重载：修改Python文件后自动重启
- API文档：访问 `/docs` 查看自动生成的API文档
